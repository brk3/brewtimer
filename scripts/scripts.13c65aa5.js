"use strict";angular.module("brewtimerApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ngAudio","timer","siyfion.sfTypeahead"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}]);var hops=[{addition:"Ahtanum"},{addition:"Amarillo"},{addition:"Apollo"},{addition:"Bravo"},{addition:"Calypso"},{addition:"Cascade"},{addition:"Centennial"},{addition:"Chelan"},{addition:"Chinook"},{addition:"Citra"},{addition:"Cluster"},{addition:"Columbus"},{addition:"Comet"},{addition:"Crystal"},{addition:"El Dorado"},{addition:"Eroica"},{addition:"Galena"},{addition:"Glacier"},{addition:"Greenburg"},{addition:"Horizon"},{addition:"Liberty"},{addition:"Millennium"},{addition:"Mount Hood"},{addition:"Mount Rainier"},{addition:"Mosaic"},{addition:"Newport"},{addition:"Nugget"},{addition:"Palisade"},{addition:"San Juan Ruby Red"},{addition:"Santiam"},{addition:"Satus"},{addition:"Simcoe"},{addition:"Sonnet Golding"},{addition:"Sterling"},{addition:"Summit"},{addition:"Super Galena"},{addition:"Tillicum"},{addition:"Tomahawk"},{addition:"Ultra"},{addition:"Vanguard"},{addition:"Warrior"},{addition:"Willamette"},{addition:"Zeus"},{addition:"Zythos"},{addition:"Admiral"},{addition:"Brewer's Gold"},{addition:"Bramling Cross"},{addition:"Bullion"},{addition:"Challenger"},{addition:"First Gold"},{addition:"Fuggle"},{addition:"Goldings"},{addition:"Herald"},{addition:"Northdown"},{addition:"Northern Brewer"},{addition:"Phoenix"},{addition:"Pilgrim"},{addition:"Pilot"},{addition:"Pioneer"},{addition:"Progress"},{addition:"Target"},{addition:"Whitbread Golding"},{addition:"Hallertauer Herkules"},{addition:"Hallertauer Magnum"},{addition:"Hallertauer Taurus"},{addition:"Magnum"},{addition:"Merkur"},{addition:"Opal"},{addition:"Perle"},{addition:"Polaris"},{addition:"Saphir"},{addition:"Select"},{addition:"Smaragd"},{addition:"Tradition"},{addition:"Hallertau"},{addition:"Hersbrucker"},{addition:"Saaz"},{addition:"Tettnang"},{addition:"Spalt"},{addition:"Ella"},{addition:"Feux-Coeur Francais"},{addition:"Galaxy"},{addition:"Pride of Ringwood"},{addition:"Summer"},{addition:"Super Pride"},{addition:"Topaz"},{addition:"Vic Secret"},{addition:"Green Bullet"},{addition:"Hallertau Aroma/Wakatu"},{addition:"Kohatu"},{addition:"Motueka"},{addition:"Nelson Sauvin"},{addition:"Pacifica"},{addition:"Pacific Gem"},{addition:"Pacific Jade"},{addition:"Rakau"},{addition:"Riwaka"},{addition:"Southern Cross"},{addition:"Sticklebract"},{addition:"Super Alpha"},{addition:"Wai-iti"},{addition:"Waimea"},{addition:"Aramis"},{addition:"Bor"},{addition:"Coigneau"},{addition:"Junga"},{addition:"Lublin"},{addition:"Marynka"},{addition:"Premiant"},{addition:"Sladek"},{addition:"Strisselspalt"},{addition:"Styrian Atlas"},{addition:"Styrian Aurora"},{addition:"Styrian Bobek"},{addition:"Styrian Celeia"},{addition:"Styrian Golding"},{addition:"Sybilla"},{addition:"Tardif de Bourgogne"}],other=[{addition:"Wort Chiller"},{addition:"Irish Moss"},{addition:"Whirfloc"},{addition:"Gelatin"}],allAdditions=hops.concat(other);angular.module("brewtimerApp").controller("MainCtrl",["$scope","ngAudio",function(a,b){a.appVersion=.1,a.timerStyle={color:"black"},a.alarm=b.load("sounds/alarm.mp3"),a.alarm.loop=!0,a.showAlert=!1,a.timerButtonText="Start",a.brewAdditions=[{ingredient:"",mins:60,amount:14,unit:"g",added:!1},{ingredient:"",mins:10,amount:28,unit:"g",added:!1},{ingredient:"",mins:0,amount:28,unit:"g",added:!1}];var c=new Bloodhound({datumTokenizer:function(a){return Bloodhound.tokenizers.whitespace(a.addition)},queryTokenizer:Bloodhound.tokenizers.whitespace,local:allAdditions});c.initialize(),a.ingredientInputOptions={highlight:!0},a.ingredientInputData={displayKey:"addition",source:c.ttAdapter()},a.onTimerButtonClick=function(){"Pause"===a.timerButtonText?(a.$broadcast("timer-stop"),a.timerButtonText="Start"):"Start"===a.timerButtonText?(a.$broadcast("timer-start"),a.timerButtonText="Pause"):"Stop"===a.timerButtonText&&(a.alarm.stop(),a.showAlert=!1,a.timerButtonText="Start",a.resetTimer(),a.brewAdditions.forEach(function(a){a.added=!1}))},a.resetTimer=function(){a.$broadcast("timer-stop"),a.$broadcast("timer-start"),a.$broadcast("timer-stop"),a.timerStyle={color:"black"}},a.$on("timer-tick",function(){a.timerTick()}),a.timerTick=function(b,c){var d=c.millis/1e3;a.brewAdditions.forEach(function(b){60*b.mins===d&&(a.alarm.play(),a.nextAddition=b,a.showAlert=!0),0===d&&(a.timerButtonText="Stop",a.timerStyle={color:"red"},a.alarm.play())})},a.onAlertClick=function(){a.alarm.stop(),a.showAlert=!1,a.nextAddition.added=!0},a.addBrewAddition=function(){a.brewAdditions.push({ingredient:"",mins:0,amount:28,unit:"g"})},a.removeBrewAddition=function(){a.brewAdditions.pop()}}]);